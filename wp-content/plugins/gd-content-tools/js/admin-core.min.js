var gdcet_plugin_core;(function($,g,h,j){gdcet_plugin_core={temp:{url:""},init:function(){if(gdcet_data.page==="tools"){gdcet_plugin_core.tools.init()}if(gdcet_data.page==="cpt"){gdcet_plugin_core.dialogs.cpt();gdcet_plugin_core.cpt.init();gdcet_plugin_core.cpt.edit()}if(gdcet_data.page==="tax"){gdcet_plugin_core.dialogs.tax();gdcet_plugin_core.tax.init()}},shared:{errors:function(){if(typeof gdcet_global_errors_keys!=="undefined"){var i;for(i=0;i<gdcet_global_errors_keys.length;i++){var a=gdcet_global_errors_keys[i];if(a!==""){$("tr.d4p-settings-item-row-"+a).addClass("d4p-settings-item-error")}}}},reorder:function(c,d,f){if($(c+" tbody tr."+d).length<2){return}$(c+" tbody").sortable({items:"tr."+d,cursor:"move",axis:"y",containment:c,handle:"td.column-icon",placeholder:"gdcet-row-placeholder",scrollSensitivity:32,forceHelperSize:true,start:function(e,a){a.item.addClass("gdcet-row-dragged");a.placeholder.height(a.item.height()).width(a.item.width())},stop:function(e,a){a.item.removeClass("gdcet-row-dragged")},update:function(e,a){var b=[];$(c+" tr."+d).each(function(){b.push($(this).data(f))});$.ajax({dataType:"html",data:{list:b,type:f},type:"POST",url:ajaxurl+"?action=gdcet-change-objects-order&_ajax_nonce="+gdcet_data.nonce})}})},clear_labels:function(){$(".gdcet-ctrl-clear-all-labels").click(function(e){e.preventDefault();$(".gdcet-input-text-label input").val("")})},show_default:function(){$(".gdcet-objects-default-toggler").click(function(e){e.preventDefault();$(this).hide().next().slideDown(300)})}},dialogs:{classes:function(a){var b="wp-dialog d4p-dialog gdcet-modal-dialog";if(a!==""){b+=" "+a}return b},defaults:function(){return{width:480,height:"auto",minHeight:24,autoOpen:false,resizable:false,modal:true,closeOnEscape:false,zIndex:300000,open:function(){$(".gdcet-button-focus").focus()}}},icons:function(b){$(b).next().find(".ui-dialog-buttonset button").each(function(){var a=$(this).data("icon");if(a!==""){$(this).find("span.ui-button-text").prepend(gdcet_data["button_icon_"+a])}})},cpt:function(){var a=$.extend({},gdcet_plugin_core.dialogs.defaults(),{width:640,dialogClass:gdcet_plugin_core.dialogs.classes("gdcet-dialog-hidex"),buttons:[{id:"gdcet-delete-cpt-delete",class:"gdcet-dialog-button-delete",text:gdcet_data.dialog_button_delete,data:{icon:"delete"},click:function(){$("#gdcet-dialog-delete-cpt-confirm").wpdialog("close");g.location=gdcet_plugin_core.temp.url}},{id:"gdcet-delete-cpt-cancel",class:"gdcet-dialog-button-cancel gdcet-button-focus",text:gdcet_data.dialog_button_cancel,data:{icon:"cancel"},click:function(){$("#gdcet-dialog-delete-cpt-confirm").wpdialog("close")}}]});$("#gdcet-dialog-delete-cpt-confirm").wpdialog(a);gdcet_plugin_core.dialogs.icons("#gdcet-dialog-delete-cpt-confirm")},tax:function(){var a=$.extend({},gdcet_plugin_core.dialogs.defaults(),{width:640,dialogClass:gdcet_plugin_core.dialogs.classes("gdcet-dialog-hidex"),buttons:[{id:"gdcet-delete-tax-delete",class:"gdcet-dialog-button-delete",text:gdcet_data.dialog_button_delete,data:{icon:"delete"},click:function(){$("#gdcet-dialog-delete-tax-confirm").wpdialog("close");g.location=gdcet_plugin_core.temp.url}},{id:"gdcet-delete-tax-cancel",class:"gdcet-dialog-button-cancel gdcet-button-focus",text:gdcet_data.dialog_button_cancel,data:{icon:"cancel"},click:function(){$("#gdcet-dialog-delete-tax-confirm").wpdialog("close")}}]});$("#gdcet-dialog-delete-tax-confirm").wpdialog(a);gdcet_plugin_core.dialogs.icons("#gdcet-dialog-delete-tax-confirm")}},tax:{init:function(){gdcet_plugin_core.shared.errors();gdcet_plugin_core.shared.clear_labels();gdcet_plugin_core.shared.show_default();gdcet_plugin_core.shared.reorder(".gdcet-grid-tax","gdcet-row-custom-taxonomy","tax");$(".gdcet-action-delete-tax").click(function(e){e.preventDefault();gdcet_plugin_core.temp.url=$(this).attr("href");$("#gdcet-dialog-delete-tax-confirm").wpdialog("open")})}},cpt:{init:function(){gdcet_plugin_core.shared.errors();gdcet_plugin_core.shared.clear_labels();gdcet_plugin_core.shared.show_default();gdcet_plugin_core.shared.reorder(".gdcet-grid-cpt","gdcet-row-custom-post-type","cpt");$(".gdcet-action-delete-cpt").click(function(e){e.preventDefault();gdcet_plugin_core.temp.url=$(this).attr("href");$("#gdcet-dialog-delete-cpt-confirm").wpdialog("open")})},edit:function(){$(".gdcet-cpt-icon-type select").change(function(){var a=$(this).val();$(".gdcet-cpt-icon").addClass("gdcet-wrap-icon-hide");$(".gdcet-cpt-icon-"+a).removeClass("gdcet-wrap-icon-hide")});$(".gdcet-permalink-example").change(function(){var a=$(this).val();$("#gdcetcpt_settings__permalinks_single_structure").val(a)})}},tools:{init:function(){if(gdcet_data.panel==="export"){gdcet_plugin_core.tools.export()}},export:function(){$("#gdcet-tool-export").click(function(e){e.preventDefault();g.location=$("#gdcet-export-url").val()})}}};gdcet_plugin_core.init()})(jQuery,window,document);
