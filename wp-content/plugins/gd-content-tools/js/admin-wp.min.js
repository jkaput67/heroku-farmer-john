var gdcet_plugin_wp;(function($,d,f,g){gdcet_plugin_wp={init:function(){gdcet_plugin_wp.basic.limited();if(gdcet_wp_data.hook==="nav-menus.php"){gdcet_plugin_wp.nav.init()}if(gdcet_wp_data.hook==="edit-tags.php"){gdcet_plugin_wp.tax.images.init()}},basic:{limited:function(){$(".gdcet-term-limited").change(function(){var a=$(this).closest(".categorydiv"),terms=[];$(".gdcet-term-limited:checked",a).each(function(){terms[terms.length]=$(this).val()});jQuery(".gdcet_tax_input",a).val(terms.join(", "))})}},nav:{init:function(){$("#gdtt-cpt-archives-box-submit").click(function(e){e.preventDefault();var b=[],spinner=$(this).parent().find(".spinner");$("#gdtt-cpt-archives-list li input:checked").each(function(){b.push(jQuery(this).val())});if(b.length>0){spinner.css("visibility","visible");$.post(ajaxurl+"?action=gdcet-navmenus-post-type-archives&_ajax_nonce="+gdcet_wp_data.nonce,{list:b},function(a){$("#menu-to-edit").append(a);spinner.css("visibility","hidden")})}})}},tax:{images:{init:function(){d4plib_media_image.init();$(".gdcet-assign-term button").click(function(e){e.preventDefault();$(this).parent().parent().prev().click()});$(".gdcet-delete-term button").click(function(e){e.preventDefault();var a=$(this).parent().parent().prev();$(this).parent().hide();a.removeClass("gdcet-has-image").find("img").remove();gdcet_plugin_wp.tax.images.send(a.data("taxonomy"),a.data("term"),0)});$(".gdcet-term-image").click(function(){d4plib_shared.active_element=$(this);d4plib_media_image.open(gdcet_plugin_wp.tax.images.handler,true)})},handler:function(a){var b=d4plib_shared.active_element;b.find("img").remove();b.next().find(".gdcet-delete-term").show();b.addClass("gdcet-has-image").prepend($("<img>",{"src":a.url,"alt":a.name}));gdcet_plugin_wp.tax.images.send(b.data("taxonomy"),b.data("term"),a.id)},send:function(a,b,c){$.ajax({dataType:"json",data:{taxonomy:a,term:b,image:c},type:"POST",url:ajaxurl+"?action=gdcet-update-term-image&_ajax_nonce="+gdcet_wp_data.nonce})}}}};gdcet_plugin_wp.init()})(jQuery,window,document);
